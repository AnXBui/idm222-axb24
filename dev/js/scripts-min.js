let projectLink,scrollPosition=0,dur=.25,dur2=2*dur,dur3=4*dur,durmin2=dur/2,durmin3=dur/4,lastScrollTop=0,delta=30,transitioning=!1,firstPage=!0;function reParent(e,t){t.appendChild(e)}function lerp(e,t,o){return(1-o)*e+o*t}gsap.registerPlugin(ScrollTrigger,ScrollToPlugin,Flip),gsap.defaults({ease:"power2",duration:dur});const getMousePos=e=>{let t=0,o=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:o}};function sleep(e){return new Promise(t=>setTimeout(t,e))}function getWidthTotal(e){let t=0;return e.forEach(e=>{t+=e.clientWidth}),t}function hasClass(e,t){return e.classList.contains(t)}function addClass(e,t){e.classList.add(t)}function rmvClass(e,t){e.classList.remove(t)}function debounce(e,t,o){var s;return function(){var i=this,r=arguments,l=function(){s=null,o||e.apply(i,r)},a=o&&!s;clearTimeout(s),s=setTimeout(l,t),a&&e.apply(i,r)}}function getViewport(){var e,t;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function enableBodyScroll(){if("complete"===document.readyState){if(document.body.style.position="",document.body.style.overflowY="",document.body.style.marginTop){const e=-parseInt(document.body.style.marginTop,10);document.body.style.marginTop="",window.scrollTo(window.pageXOffset,e)}}else window.addEventListener("load",enableBodyScroll)}function disableBodyScroll({savePosition:e=!1}={}){"complete"===document.readyState?document.body.scrollHeight>window.innerHeight&&(e&&(document.body.style.marginTop=`-${window.pageYOffset}px`),document.body.style.position="fixed",document.body.style.overflowY="scroll"):window.addEventListener("load",()=>disableBodyScroll({savePosition:e}))}const swupJS=[{from:"(.*)",to:"(.*)",in:e=>{menu.active&&menu.hide(),gsap.fromTo(document.querySelector("#swup"),.75,{opacity:0},{opacity:1,onComplete:()=>{e()}})},out:e=>{document.querySelector("#swup").style.opacity=1,gsap.fromTo(document.querySelector("#swup"),.75,{opacity:1},{opacity:0,onComplete:()=>{gsap.set(window,{scrollTo:0}),e()}})}},{from:"(.*)",to:"project",in:e=>{menu.active&&menu.hide(),disableBodyScroll(),gsap.fromTo("#swup",1,{opacity:0},{opacity:1,onComplete:()=>{transitioning=!1,e()}})},out:e=>{let t=projectLink,o=Flip.getState(t);transitioning=!0,document.querySelector(".fixedCoverWrapper").appendChild(t),addClass(projectLink,"fullScreen");let s=gsap.timeline({onComplete:()=>{e()}}),i=Flip.from(o,{duration:.75,ease:"expo",zIndex:5});s.fromTo("#swup",.75,{opacity:1},{opacity:0},"start"),s.add(i,"start")}}],swupOptions={linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[data-swup-link]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',plugins:[new SwupJsPlugin(swupJS),new SwupA11YPlugin,new SwupPreloadPlugin]},swup=new Swup(swupOptions);class Menu{constructor(e){this.menu=e,this.main=e.querySelector(".menuMain"),this.bar=e.querySelector(".menuBar"),this.animate=e.querySelectorAll("*[data-animate]"),this.button={main:e.querySelector(".menuButton"),top:e.querySelector(".barTop"),cen1:e.querySelector(".barCenter1"),cen2:e.querySelector(".barCenter2"),bot:e.querySelector(".barBot")},this.links=e.querySelectorAll("a[data-swup-link]"),this.fill=e.querySelector(".menuFill"),this.active=!1,this.animating=!1,this.didScroll=!1,this.scrollPos=0,gsap.set(this.button.cen1,{transformOrigin:"center"}),gsap.set(this.button.cen2,{transformOrigin:"center"}),gsap.set(this.fill,{transformOrigin:"90% 10%"}),this.in=gsap.timeline({paused:!0,onComplete:()=>{this.animating=!1,disableBodyScroll({savePosition:!0})}}).to(this.button.top,dur,{scaleX:0},"start").to(this.button.bot,dur,{scaleX:0},"start").to(this.button.cen1,dur,{rotate:45},"start").to(this.button.cen2,dur,{rotate:-45},"start").fromTo(this.fill,dur2,{scale:0},{scale:1},"start").fromTo(this.main,dur,{alpha:0},{alpha:1},"start+=0.15").fromTo(this.animate,dur,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:durmin2},"start+=0.2"),this.out=gsap.timeline({paused:!0,onComplete:()=>{addClass(this.menu,"inactive"),this.animating=!1}}).to(this.main,dur,{alpha:0},"start").to(this.fill,dur2,{scale:0},"start").to(this.button.top,dur,{scaleX:1},"start").to(this.button.bot,dur,{scaleX:1},"start").to(this.button.cen1,dur,{rotate:0},"start").to(this.button.cen2,dur,{rotate:0},"start"),this.init()}init(){this.button.main.addEventListener("click",()=>{this.animating||(this.active?this.hide():this.show())}),this.links.forEach(e=>{e.addEventListener("click",()=>{let t=e.href;!this.animating&&this.active&&t.indexOf(window.location.href)>-1&&this.hide()})}),window.addEventListener("scroll",()=>{this.didScroll=!0}),setInterval(()=>{this.didScroll&&(this.hasScrolled(),this.didScroll=!1)},150)}hasScrolled(){let e=window.pageYOffset||document.documentElement.scrollTop;Math.abs(lastScrollTop-e)<=delta||this.active||this.animating||(e>lastScrollTop?addClass(this.menu,"up"):rmvClass(this.menu,"up"),lastScrollTop=e)}showBar(){rmvClass(this.menu,"up"),lastScrollTop=0}hide(){this.animating=!0,enableBodyScroll(),document.querySelector(".projectControlTitle")&&(gsap.to(".projectControlTitle",.25,{opacity:1,yPercent:0}),gsap.to(".projectControlPrev",.25,{opacity:1,xPercent:0}),gsap.to(".projectControlNext",.25,{opacity:1,xPercent:0})),rmvClass(this.bar,"dark"),this.out.restart(),this.active=!1}show(){this.animating=!0,rmvClass(this.menu,"inactive"),addClass(this.bar,"dark"),this.in.restart(),this.active=!0,document.querySelector(".projectControlTitle")&&(gsap.to(".projectControlTitle",.25,{opacity:0,yPercent:-100}),gsap.to(".projectControlPrev",.25,{opacity:0,xPercent:-100}),gsap.to(".projectControlNext",.25,{opacity:0,xPercent:100}))}}let viewSize=getViewport()[0],observerList=[];const scrollHandler=(e,t)=>{e.forEach(t=>{let o=t.target;if(observerList.push(o),t.isIntersecting){ScrollTrigger.refresh(),effectObserver.unobserve(o);const t=e.indexOf(o);t>-1&&observerList.splice(t,1)}})};var effectObserver=new IntersectionObserver(scrollHandler);class PageEffects{constructor(){this.fxArray=[],this.paraArray=[],this.saveStyles=[],this.killList=[],this.nextProject=null,this.refetch()}fetchSections(){if(document.querySelector(".effectWrapper")&&document.querySelectorAll(".effectWrapper").forEach(e=>{const t=new EffectSection(e),o=t.getPreStyles();null!=o&&o.forEach(e=>{this.saveStyles.push(e)}),this.fxArray.push(t)}),document.querySelector(".projectConclusion")){this.nextProject=document.querySelector(".projectConclusion");let e=gsap.timeline();const t=ScrollTrigger.create({trigger:this.nextProject,start:"top bottom",animation:e,toggleActions:"play complete restart reset"});e.to(".projectControls",dur,{alpha:0}),this.killList.push(t)}if(document.querySelector(".videoPlayer")){let e=document.querySelectorAll(".videoPlayer");this.players=[],console.log(e),e.forEach(e=>{const t=new Plyr(e);this.players.push(t),this.killList.push(t),console.log(t)})}}killAll(){this.killList&&this.killList.forEach(e=>{e.type||"video"==e.type?e.destroy():e.kill()}),null!=observerList&&observerList.forEach(e=>{effectObserver.unobserve(e)}),ScrollTrigger.clearMatchMedia(),this.fxArray=[],this.paraArray=[],this.saveStyles=[],this.killList=[],this.nextProject=null}refetch(){this.saveStyles&&(this.saveStyles=[]),this.fetchSections(),this.applyEffects()}applyEffects(){ScrollTrigger.saveStyles(this.saveStyles),ScrollTrigger.matchMedia({"(min-width: 992px)":()=>(this.fxArray.forEach(e=>{e.getEffects("desktop"),this.killList.push(e)}),this.paraArray.forEach(e=>{e.getParallax(),this.killList.push(e)}),()=>{}),all:()=>{this.fxArray.forEach(e=>{e.getEffects()})}})}}class EffectSection{constructor(e){this.wrapper=e,this.elements=this.wrapper.querySelectorAll("[data-effect]"),this.killList=[],this.saveStyles=[],this.tl=gsap.timeline()}fadeout(e){let t=gsap.to(e,.5,{alpha:0}),o=ScrollTrigger.create({trigger:this.wrapper,start:"top top",end:getViewport()[1],animation:t,scrub:!0});this.killList.push({media:"all",fx:t}),this.killList.push({media:"all",fx:o})}fadein(e){let t=gsap.fromTo(e,.5,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:.25}),o=ScrollTrigger.create({trigger:this.wrapper,start:"top 80%",animation:t,once:!0});this.killList.push({media:"all",fx:t}),this.killList.push({media:"all",fx:o})}autoSlide(e){let t="90% top",o="10% bottom";hasClass(this.wrapper,"autoSticky")&&(o="top top",t="bottom bottom"),this.wrapper.querySelectorAll(".lazyload").forEach(e=>{addClass(e,"lazypreload")});let s=gsap.timeline(),i=ScrollTrigger.create({trigger:this.wrapper,start:o,end:t,animation:s,scrub:!0}),r=e.dataset.scale,l=e.querySelectorAll("picture");r&&s.to(l,.1,{scale:.75}),hasClass(this.wrapper,"autoSticky")?s.to(e,1,{xPercent:-100,x:"+=100vw",ease:"none"}):s.fromTo(e,1,{x:"+=40vw",xPercent:0},{xPercent:-100,x:"+=20vw",ease:"none"}),r&&s.to(l,.1,{scale:1}),effectObserver.observe(this.wrapper),this.killList.push({media:"desktop",fx:s}),this.killList.push({media:"desktop",fx:i})}getPreStyles(){return this.elements.forEach(e=>{switch(e.dataset.effect){case"autoSlide":this.saveStyles.push(e)}}),this.saveStyles}getEffects(e="all"){this.fadeinGroup=[],this.elements.forEach(t=>{switch(t.dataset.effect){case"fadeout":"all"==e&&this.fadeout(t);break;case"fadein":"all"==e&&(console.log("fadein"),console.log(t),this.fadeinGroup.push(t));break;case"autoSlide":"desktop"==e&&this.autoSlide(t)}}),"all"==e&&this.fadeinGroup.length>0&&this.fadein(this.fadeinGroup)}kill(e="all"){this.killList&&this.killList.forEach(t=>{t.media!=e&&"all"!=e||t.fx.kill()}),"all"==e&&(this.wrapper=null,this.elements=null,this.killList=null,this.saveStyles=null)}}class ParallaxSection{constructor(e){this.wrapper=e,this.active=!1,this.running=!1,this.killList=[],this.wrapper.querySelectorAll("[data-depth]")&&(this.active=!0,this.layers=this.wrapper.querySelectorAll("[data-depth]"),this.tl=gsap.timeline({paused:!0}))}getParallax(){const e=ScrollTrigger.create({trigger:this.wrapper,start:"top bottom",end:"bottom top",animation:this.tl,markers:!0,scrub:!0});this.layers.forEach((e,t)=>{const o=-100*e.dataset.depth;this.tl.fromTo(e,1,{yPercent:-o,ease:"none"},{yPercent:o,ease:"none"},"start")}),this.killList.push(e)}kill(){this.active&&this.killList.forEach(e=>{e.kill()})}}let menu=new Menu(document.querySelector("header"));function init(){document.querySelectorAll("[data-swup-preload]").forEach(e=>{const t=e.getAttribute("href");swup.preloadPage(t)}),ScrollTrigger.refresh(),lastScrollTop=0,null!=projectLink?gsap.to(projectLink,.5,{alpha:0,delay:.5,onComplete:()=>{projectLink.remove(),enableBodyScroll()}}):enableBodyScroll(),menu.showBar()}function unload(){pageEffects.killAll()}swup.on("clickLink",e=>{"project"==e.delegateTarget.getAttribute("data-swup-transition")&&(projectLink=e.target)}),swup.on("samePageWithHash",e=>{const t=e.delegateTarget.getAttribute("href");document.querySelector(t).offsetHeight;gsap.to(window,.5,{scrollTo:t})});class HoverImgF{constructor(e){this.DOM={el:e},this.DOM.reveal=document.createElement("div"),this.DOM.reveal.innerHTML='<div class="hoverInner"></div>',this.DOM.reveal.className="hoverReveal",this.DOM.el.appendChild(this.DOM.reveal),this.initEvents(),this.DOM.reveal.style.visibility="hidden"}initEvents(){this.positionElement=e=>{const t=getMousePos(e),o=document.body.scrollTop+document.documentElement.scrollTop,s=document.body.scrollLeft+document.documentElement.scrollLeft,i=this.DOM.reveal.offsetHeight/2,r=this.DOM.reveal.offsetWidth/2,l=t.y-i-o,a=t.x-r-s;gsap.set(this.DOM.reveal,{y:l,x:a})},this.mouseenterFn=e=>{this.positionElement(e),this.showImage(),this.DOM.el.addEventListener("mousemove",this.mousemoveFn),this.DOM.el.addEventListener("mouseleave",this.mouseleaveFn)},this.mousemoveFn=e=>requestAnimationFrame(()=>{this.positionElement(e)}),this.mouseleaveFn=()=>{this.hideImage(),this.DOM.el.removeEventListener("mousemove",this.mousemoveFn),this.DOM.el.removeEventListener("mouseleave",this.mouseleaveFn)},this.DOM.el.addEventListener("mouseenter",this.mouseenterFn)}showImage(){this.tl=gsap.timeline({onStart:()=>{this.DOM.reveal.style.visibility="visible"}}).add("begin").fromTo(this.DOM.reveal,.25,{alpha:0,scale:0,overwrite:!0},{alpha:1,overwrite:!0,scale:1},"begin")}hideImage(){this.tl=gsap.timeline({onComplete:()=>{this.DOM.reveal.style.visibility="hidden"}}).add("begin").to(this.DOM.reveal,.25,{opacity:0,scale:0},"begin")}}window.addEventListener("load",()=>{if("yes"==sessionStorage.getItem("loaded"))return addClass(document.querySelector("body"),"noCursor"),void rmvClass(document.querySelector("body"),"noScroll");let e=gsap.timeline();const t=document.querySelector("#loaderSolid"),o=document.querySelector("#loaderText");gsap.set(t,{transformOrigin:"center top"}),e.to(window,{duration:.01,scrollTo:0}),e.to(o,.5,{yPercent:-100,delay:1,ease:"expo"}),e.to(t,1,{scaleY:0,ease:"expo"},"-=0.25"),e.from("main",.5,{alpha:0,y:300,onComplete:()=>{rmvClass(document.querySelector("body"),"noScroll"),addClass(document.querySelector("body"),"noCursor"),sessionStorage.setItem("loaded","yes")}})}),init();let pageEffects=new PageEffects;swup.on("contentReplaced",()=>{firstPage=!1,init(),pageEffects.refetch()}),swup.on("willReplaceContent",unload);