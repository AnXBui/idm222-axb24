function reParent(t,e){e.appendChild(t)}function sleep(t){return new Promise(e=>setTimeout(e,t))}function getWidthTotal(t){let e=0;return t.forEach(t=>{console.log(t.clientWidth),e+=t.clientWidth}),e}function hasClass(t,e){return t.classList.contains(e)}function addClass(t,e){t.classList.add(e)}function rmvClass(t,e){t.classList.remove(e)}function debounce(t,e,i){var s;return function(){var l=this,o=arguments,a=function(){s=null,i||t.apply(l,o)},r=i&&!s;clearTimeout(s),s=setTimeout(a,e),r&&t.apply(l,o)}}function getViewport(){var t,e;return void 0!==window.innerWidth?(t=window.innerWidth,e=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),[t,e]}function enableBodyScroll(){if("complete"===document.readyState){if(document.body.style.position="",document.body.style.overflowY="",document.body.style.marginTop){const t=-parseInt(document.body.style.marginTop,10);document.body.style.marginTop="",window.scrollTo(window.pageXOffset,t)}}else window.addEventListener("load",enableBodyScroll)}function disableBodyScroll({savePosition:t=!1}={}){"complete"===document.readyState?document.body.scrollHeight>window.innerHeight&&(t&&(document.body.style.marginTop=`-${window.pageYOffset}px`),document.body.style.position="fixed",document.body.style.overflowY="scroll"):window.addEventListener("load",()=>disableBodyScroll({savePosition:t}))}let projectLink;gsap.registerPlugin(ScrollTrigger,ScrollToPlugin,Flip);let scrollPosition=0,dur=.25,dur2=2*dur,dur3=4*dur,durmin2=dur/2,durmin3=dur/4,lastScrollTop=0,delta=30,transitioning=!1,firstPage=!0;gsap.defaults({ease:"power2",duration:dur});const swupJS=[{from:"(.*)",to:"(.*)",in:t=>{menu.hide(),gsap.fromTo(document.querySelector("#swup"),.25,{opacity:0},{opacity:1,onComplete:t})},out:t=>{document.querySelector("#swup").style.opacity=1,gsap.fromTo(document.querySelector("#swup"),.25,{opacity:1},{opacity:0,onComplete:t})}},{from:"(.*)",to:"project",in:t=>{disableBodyScroll(),gsap.fromTo("#swup",.5,{opacity:0},{opacity:1,onComplete:()=>{transitioning=!1,enableBodyScroll(),t()}})},out:t=>{let e=projectLink,i=Flip.getState(e);transitioning=!0,document.querySelector(".fixedCoverWrapper").appendChild(e),addClass(projectLink,"fullScreen");let s=gsap.timeline({onComplete:()=>{t()}}),l=Flip.from(i,{duration:1,ease:"expo",zIndex:5});s.fromTo("#swup",.5,{opacity:1},{opacity:0},"start"),s.add(l,"start")}}],swupOptions={linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[data-swup-link]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',plugins:[new SwupJsPlugin(swupJS),new SwupA11YPlugin,new SwupPreloadPlugin]},swup=new Swup(swupOptions);class Menu{constructor(t){this.menu=t,this.main=t.querySelector(".menuMain"),this.bar=t.querySelector(".menuBar"),this.animate=t.querySelectorAll("*[data-animate]"),this.button={main:t.querySelector(".menuButton"),top:t.querySelector(".barTop"),cen1:t.querySelector(".barCenter1"),cen2:t.querySelector(".barCenter2"),bot:t.querySelector(".barBot")},this.links=t.querySelectorAll("a[data-swup-link]"),this.fill=t.querySelector(".menuFill"),this.active=!1,this.animating=!1,this.didScroll=!1,this.scrollPos=0,gsap.set(this.button.cen1,{transformOrigin:"center"}),gsap.set(this.button.cen2,{transformOrigin:"center"}),gsap.set(this.fill,{transformOrigin:"90% 10%"}),this.in=gsap.timeline({paused:!0,onComplete:()=>{this.animating=!1,disableBodyScroll({savePosition:!0})}}).to(this.button.top,dur,{scaleX:0},"start").to(this.button.bot,dur,{scaleX:0},"start").to(this.button.cen1,dur,{rotate:45},"start").to(this.button.cen2,dur,{rotate:-45},"start").fromTo(this.fill,dur2,{scale:0},{scale:1},"start").fromTo(this.main,dur,{alpha:0},{alpha:1},"start+=0.15").fromTo(this.animate,dur,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:durmin2},"start+=0.2"),this.out=gsap.timeline({paused:!0,onComplete:()=>{addClass(this.menu,"inactive"),this.animating=!1}}).to(this.main,dur,{alpha:0},"start").to(this.fill,dur2,{scale:0},"start").to(this.button.top,dur,{scaleX:1},"start").to(this.button.bot,dur,{scaleX:1},"start").to(this.button.cen1,dur,{rotate:0},"start").to(this.button.cen2,dur,{rotate:0},"start"),this.init()}init(){this.button.main.addEventListener("click",()=>{this.animating||(this.active?this.hide():this.show())}),this.links.forEach(t=>{t.addEventListener("click",()=>{let e=t.href;!this.animating&&this.active&&e.indexOf(window.location.href)>-1&&this.hide()})}),window.addEventListener("scroll",()=>{this.didScroll=!0}),setInterval(()=>{this.didScroll&&(this.hasScrolled(),this.didScroll=!1)},250)}hasScrolled(){let t=window.pageYOffset||document.documentElement.scrollTop;Math.abs(lastScrollTop-t)<=delta||this.active||this.animating||(t>lastScrollTop?addClass(this.menu,"up"):rmvClass(this.menu,"up"),lastScrollTop=t)}showBar(){rmvClass(this.menu,"up"),lastScrollTop=0}hide(){this.animating=!0,enableBodyScroll(),rmvClass(this.bar,"dark"),this.out.restart(),this.active=!1}show(){this.animating=!0,rmvClass(this.menu,"inactive"),addClass(this.bar,"dark"),this.in.restart(),this.active=!0}}let viewSize=getViewport()[0],observerList=[];const scrollHandler=(t,e)=>{t.forEach(e=>{let i=e.target;if(observerList.push(i),e.isIntersecting){console.log("entry viewed"),ScrollTrigger.refresh(),effectObserver.unobserve(i);const e=t.indexOf(i);e>-1&&observerList.splice(e,1)}})};var effectObserver=new IntersectionObserver(scrollHandler);class PageEffects{constructor(){this.fxArray=[],this.paraArray=[],this.saveStyles=[],this.killList=[],this.refetch();const t=this.refactor();document.addEventListener("resize",t)}fetchSections(){document.querySelector(".effectWrapper")&&document.querySelectorAll(".effectWrapper").forEach(t=>{const e=new EffectSection(t),i=e.getPreStyles();null!=i&&i.forEach(t=>{this.saveStyles.push(t)}),this.fxArray.push(e)}),document.querySelector(".parallaxSection")&&document.querySelectorAll(".parallaxSection").forEach(t=>{const e=new ParallaxSection(t);e.active&&e.layers.forEach(t=>{this.saveStyles.push(t),this.paraArray.push(e)})})}killAll(){this.killList&&this.killList.forEach(t=>{t.kill()}),null!=observerList&&observerList.forEach(t=>{effectObserver.unobserve(t)}),ScrollTrigger.clearMatchMedia(),this.fxArray=[],this.paraArray=[],this.saveStyles=[],this.killList=[]}refetch(){this.saveStyles&&(this.saveStyles=[]),this.fetchSections(),this.applyEffects()}refactor(){console.log("refactored")}applyEffects(){ScrollTrigger.saveStyles(this.saveStyles),ScrollTrigger.matchMedia({"(min-width: 992px)":()=>(this.fxArray.forEach(t=>{t.getEffects("desktop"),this.killList.push(t)}),this.paraArray.forEach(t=>{t.getParallax(),this.killList.push(t)}),()=>{console.log("killing via media")}),all:()=>{this.fxArray.forEach(t=>{t.getEffects()})}})}}class EffectSection{constructor(t){this.wrapper=t,this.elements=this.wrapper.querySelectorAll("[data-effect]"),this.killList=[],this.saveStyles=[],this.tl=gsap.timeline()}fadeout(t){console.log("fadeout");let e=gsap.to(t,.5,{alpha:0}),i=ScrollTrigger.create({trigger:this.wrapper,start:"top top",end:getViewport()[1],animation:e,scrub:!0});this.killList.push({media:"all",fx:e}),this.killList.push({media:"all",fx:i})}fadein(t){console.log("fadein");let e=gsap.fromTo(t,.5,{alpha:0},{alpha:1}),i=ScrollTrigger.create({trigger:this.wrapper,start:"top center",animation:e,once:!0});this.killList.push({media:"all",fx:e}),this.killList.push({media:"all",fx:i})}autoSlide(t){let e="90% top",i="10% bottom";hasClass(this.wrapper,"autoSticky")&&(i="top top",e="bottom bottom"),this.wrapper.querySelectorAll(".lazyload").forEach(t=>{addClass(t,"lazypreload")}),console.log("autoSliding elements");let s=gsap.timeline(),l=ScrollTrigger.create({trigger:this.wrapper,start:i,end:e,animation:s,scrub:!0}),o=t.dataset.scale,a=t.querySelectorAll("picture");o&&s.to(a,.1,{scale:.75}),hasClass(this.wrapper,"autoSticky")?s.to(t,1,{xPercent:-100,x:"+=100vw",ease:"linear"}):s.fromTo(t,1,{x:"+=40vw",xPercent:0},{xPercent:-100,x:"+=20vw",ease:"linear"}),o&&s.to(a,.1,{scale:1}),effectObserver.observe(this.wrapper),this.killList.push({media:"desktop",fx:s}),this.killList.push({media:"desktop",fx:l})}getPreStyles(){return this.elements.forEach(t=>{switch(t.dataset.effect){case"autoSlide":this.saveStyles.push(t);break;default:console.log("no effect")}}),this.saveStyles}getEffects(t="all"){this.elements.forEach(e=>{switch(e.dataset.effect){case"fadeout":"all"==t&&this.fadeout(e);break;case"fadein":"all"==t&&this.fadein(e);break;case"autoSlide":"desktop"==t&&(this.autoSlide(e),console.log("autoSlide"));break;default:console.log("no effect")}})}kill(t="all"){this.killList&&this.killList.forEach(e=>{e.media!=t&&"all"!=t||(e.fx.kill(),console.log("effect killed"))}),"all"==t&&(this.wrapper=null,this.elements=null,this.killList=null,this.saveStyles=null)}}class ParallaxSection{constructor(t){this.wrapper=t,this.active=!1,this.killList=[],this.wrapper.querySelectorAll("[data-depth]")&&(this.active=!0,this.layers=this.wrapper.querySelectorAll("[data-depth]"))}getParallax(){this.tl=gsap.timeline({});let t=ScrollTrigger.create({trigger:this.wrapper,start:"top bottom",end:"bottom top",animation:this.tl,scrub:!0});gsap.utils.toArray(this.layers).forEach(t=>{let e=t.dataset.depth,i=0;t.dataset.hasOwnProperty("chain")&&(i=.25*(t.dataset.chain-1));let s=-100*e;this.tl.fromTo(t,.25,{yPercent:-s},{yPercent:s,ease:"linear"},0)}),this.killList.push(t),this.killList.push(this.tl)}kill(){this.active&&(console.log("killing parallax"),this.killList.forEach(t=>{t.kill()}))}}let homeProj,menu=new Menu(document.querySelector("header"));function init(){console.log("init"),document.querySelectorAll("[data-swup-preload]").forEach(t=>{const e=t.getAttribute("href");swup.preloadPage(e)}),ScrollTrigger.refresh(),enableBodyScroll(),lastScrollTop=0,null!=projectLink&&gsap.to(projectLink,1,{alpha:0,delay:.5,onComplete:()=>{projectLink.remove()}}),menu.showBar()}function unload(){pageEffects.killAll()}swup.on("clickLink",t=>{"project"==t.delegateTarget.getAttribute("data-swup-transition")&&(projectLink=t.target)}),swup.on("samePageWithHash",t=>{let e=t.delegateTarget.getAttribute("href");document.querySelector(e).offsetHeight;gsap.to(window,.5,{scrollTo:e})}),init();let pageEffects=new PageEffects;swup.on("contentReplaced",()=>{console.log("contentReplaced"),firstPage=!1,init(),pageEffects.refetch()}),swup.on("willReplaceContent",unload);