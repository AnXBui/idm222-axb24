function reParent(t,e){e.appendChild(t)}function addClass(t,e){t.classList.add(e)}function rmvClass(t,e){t.classList.remove(e)}function enableBodyScroll(){if("complete"===document.readyState){if(document.body.style.position="",document.body.style.overflowY="",document.body.style.marginTop){const t=-parseInt(document.body.style.marginTop,10);document.body.style.marginTop="",window.scrollTo(window.pageXOffset,t)}}else window.addEventListener("load",enableBodyScroll)}function disableBodyScroll({savePosition:t=!1}={}){"complete"===document.readyState?document.body.scrollHeight>window.innerHeight&&(t&&(document.body.style.marginTop=`-${window.pageYOffset}px`),document.body.style.position="fixed",document.body.style.overflowY="scroll"):window.addEventListener("load",()=>disableBodyScroll({savePosition:t}))}let projectLink;gsap.registerPlugin(ScrollToPlugin,Flip);let scrollPosition=0,dur=.25,dur2=2*dur,dur3=4*dur,durmin2=dur/2,durmin3=dur/4,lastScrollTop=0,delta=30;gsap.defaults({ease:"power2",duration:dur});const swupJS=[{from:"(.*)",to:"(.*)",in:t=>{menu.hide(),gsap.fromTo(document.querySelector("#swup"),.25,{opacity:0},{opacity:1,onComplete:t})},out:t=>{document.querySelector("#swup").style.opacity=1,gsap.fromTo(document.querySelector("#swup"),.25,{opacity:1},{opacity:0,onComplete:t})}},{from:"(.*)",to:"scale",in:t=>{gsap.fromTo(document.querySelector("#swup"),.25,{scale:0},{scale:1,onComplete:t})},out:t=>{document.querySelector("#swup").style.opacity=1,gsap.fromTo(document.querySelector("#swup"),.25,{scale:1},{scale:0,onComplete:t})}},{from:"(.*)",to:"project",in:t=>{disableBodyScroll();let e=gsap.timeline();e.to(document,.5,{scrollTo:0}),null!=projectLink&&e.to(projectLink,.5,{alpha:0,onComplete:()=>{null!=projectLink&&(projectLink.remove(),enableBodyScroll(),t(),e.kill())}})},out:t=>{let e=projectLink,o=Flip.getState(e);document.querySelector(".fixedCoverWrapper").appendChild(e),addClass(projectLink,"fullScreen"),gsap.set(document,{scrollTo:scrollPosition}),console.log(scrollPosition);let n=gsap.timeline(),i=Flip.from(o,{duration:.75,zIndex:5,onComplete:()=>{console.log("animated transiiton"),t()}});n.fromTo("#swup",.5,{opacity:1},{opacity:0},"start"),n.to(document,.5,{scrollTo:0}),n.add(i,"start")}}],swupOptions={linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[data-swup-link]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',plugins:[new SwupJsPlugin(swupJS),new SwupA11YPlugin]},swup=new Swup(swupOptions);class Menu{constructor(t){this.menu=t,this.main=t.querySelector(".menuMain"),this.bar=t.querySelector(".menuBar"),this.animate=t.querySelectorAll("*[data-animate]"),console.log(this.animate),this.button={main:t.querySelector(".menuButton"),top:t.querySelector(".barTop"),cen1:t.querySelector(".barCenter1"),cen2:t.querySelector(".barCenter2"),bot:t.querySelector(".barBot")},this.links=t.querySelectorAll("a[data-swup-link]"),this.fill=t.querySelector(".menuFill"),this.active=!1,this.animating=!1,this.didScroll=!1,this.scrollPos=0,gsap.set(this.button.cen1,{transformOrigin:"center"}),gsap.set(this.button.cen2,{transformOrigin:"center"}),gsap.set(this.fill,{transformOrigin:"90% 10%"}),this.in=gsap.timeline({paused:!0,onComplete:()=>{this.animating=!1}}).to(this.button.top,dur,{scaleX:0},"start").to(this.button.bot,dur,{scaleX:0},"start").to(this.button.cen1,dur,{rotate:45},"start").to(this.button.cen2,dur,{rotate:-45},"start").fromTo(this.fill,dur2,{scale:0},{scale:1},"start").fromTo(this.main,dur,{alpha:0},{alpha:1},"start+=0.15").fromTo(this.animate,dur,{alpha:0,yPercent:10},{alpha:1,yPercent:0,stagger:durmin2},"start+=0.2"),this.out=gsap.timeline({paused:!0,onComplete:()=>{addClass(this.menu,"inactive"),this.animating=!1,console.log("animation out completed")}}).to(this.main,dur,{alpha:0},"start").to(this.fill,dur2,{scale:0},"start").to(this.button.top,dur,{scaleX:1},"start").to(this.button.bot,dur,{scaleX:1},"start").to(this.button.cen1,dur,{rotate:0},"start").to(this.button.cen2,dur,{rotate:0},"start"),this.init()}init(){console.log("init"),this.button.main.addEventListener("click",()=>{this.animating||(this.active?this.hide():this.show())}),this.links.forEach(t=>{let e=t.href;t.addEventListener("click",()=>{!this.animating&&this.active&&e.indexOf(window.location.href)>-1&&this.hide()})}),window.addEventListener("scroll",()=>{this.didScroll=!0}),setInterval(()=>{this.didScroll&&(this.hasScrolled(),this.didScroll=!1)},250)}hasScrolled(){console.log("has scroll");let t=window.pageYOffset||document.documentElement.scrollTop;Math.abs(lastScrollTop-t)<=delta||this.active||this.animating||(t>lastScrollTop?addClass(this.menu,"up"):rmvClass(this.menu,"up"),lastScrollTop=t)}hide(){this.animating=!0,enableBodyScroll(),rmvClass(this.bar,"dark"),this.out.restart(),this.active=!1}show(){this.animating=!0,disableBodyScroll({savePosition:!0}),rmvClass(this.menu,"inactive"),addClass(this.bar,"dark"),this.in.restart(),this.active=!0}}let menu=new Menu(document.querySelector("header"));function init(){gsap.to(window,.01,{scrollTo:0}),enableBodyScroll(),lastScrollTop=0,document.querySelector(".home"),document.querySelector(".about"),document.querySelector(".contact")}function unload(){gsap.globalTimeline.clear(),document.querySelector("#carousel")}swup.on("clickLink",t=>{projectLink=t.target}),init(),swup.on("contentReplaced",init),swup.on("willReplaceContent",unload);